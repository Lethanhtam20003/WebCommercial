<div class="admin-product-create">
	<div class="container-fluid">
		<div class="main-card card">
			<!-- Header -->
			<div class="card-header">
				<h5>
					<i class="bi bi-plus-circle-fill"></i>
					Th√™m m·ªõi s·∫£n ph·∫©m
				</h5>
			</div>

			<!-- Form Body -->
			<div class="card-body">
				<form [formGroup]="productForm" (ngSubmit)="onSubmit()">

					<div class="row g-2">
						
						<!-- T√™n s·∫£n ph·∫©m -->
						<div class="col-lg-6 col-md-12">
							<div class="form-group">
								<label class="form-label required">T√™n s·∫£n ph·∫©m</label>
								<input
									type="text"
									class="form-control"
									[class.is-invalid]="productForm.get('name')?.invalid && productForm.get('name')?.touched"
									formControlName="name"
									placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m..."
								/>
								@if (productForm.get('name')?.hasError('nameTaken')) {
									<div class="error-message">
										<i class="bi bi-exclamation-circle"></i>
										T√™n ƒë√£ t·ªìn t·∫°i, vui l√≤ng ch·ªçn t√™n kh√°c.
									</div>
								}
								@if (productForm.get('name')?.hasError('required') && productForm.get('name')?.touched) {
									<div class="error-message">
										<i class="bi bi-exclamation-circle"></i>
										Vui l√≤ng nh·∫≠p t√™n s·∫£n ph·∫©m.
									</div>
								}
							</div>
						</div>

						<!-- Gi√° s·∫£n ph·∫©m -->
						<div class="col-lg-6 col-md-12">
							<div class="form-group">
								<label class="form-label">Gi√° s·∫£n ph·∫©m (VNƒê)</label>
								<input 
									type="number" 
									class="form-control" 
									formControlName="price"
									placeholder="0"
									min="0"
								/>
							</div>
						</div>

						<!-- Tr·∫°ng th√°i -->
						<div class="col-lg-6 col-md-12">
							<div class="form-group">
								<label class="form-label">Tr·∫°ng th√°i</label>
								<select class="form-select" formControlName="status">
									<option value="ACTIVE">
										üü¢ M·ªü b√°n
									</option>
									<option value="INACTIVE">
										üî¥ Ng∆∞ng b√°n
									</option>
								</select>
								
								<!-- Status Preview -->
								@if (productForm.get('status')?.value) {

									<div class="mt-1">
										<span 
											class="status-indicator"
											[class.status-active]="productForm.get('status')?.value === 'ACTIVE'"
											[class.status-inactive]="productForm.get('status')?.value === 'INACTIVE'"
										>
											<span class="status-dot"></span>
											{{ productForm.get('status')?.value === 'ACTIVE' ? 'ƒêang m·ªü b√°n' : 'Ng∆∞ng b√°n' }}
										</span>
									</div>
								}
							</div>
						</div>

						<!-- Danh m·ª•c -->
						<div class="col-lg-6 col-md-12">
							<div class="form-group">
								<label class="form-label">Danh m·ª•c s·∫£n ph·∫©m</label>
								<ng-select
									class="custom-ng-select"
									[items]="categoryList"
									bindLabel="name"
									[multiple]="true"
									placeholder="Ch·ªçn danh m·ª•c..."
									formControlName="categories"
									[searchable]="true"
									[clearable]="true"
									[dropdownPosition]="'auto'"
									[loading]="false"
								>
									<ng-option *ngFor="let category of categoryList" [value]="category.id">
										<i class="bi bi-tag me-2"></i>{{ category.name }}
									</ng-option>
								</ng-select>
							</div>
						</div>

						<!-- M√¥ t·∫£ -->
						<div class="col-12">






							<div class="form-group">
								<label class="form-label">M√¥ t·∫£ chi ti·∫øt</label>
								<textarea
									class="form-control"
									rows="3"
									formControlName="description"
								></textarea>
							</div>
						</div>

						<!-- ·∫¢nh -->
						<div class="col-12">



							<div class="form-group">
								<label class="form-label">·∫¢nh s·∫£n ph·∫©m</label>
								<!-- Input group: URL + Add URL + Open File -->
								<div class="input-group mb-1">
									<input
										#imageUrl
										type="text"
										class="form-control"
										placeholder="Enter image URL"
										(keyup.enter)="addImageUrl(imageUrl)"
									/>
									<button
										class="btn btn-outline-secondary"
										type="button"
										(click)="addImageUrl(imageUrl)"
									>
										th√™m ·∫£nh
									</button>
									<button
										class="btn btn-outline-primary"
										type="button"
										(click)="fileInput.click()"
									>
										ch·ªçn ·∫£nh
									</button>
								</div>

								<!-- Hidden file input -->
								<input





									#fileInput
									type="file"
									class="d-none"
									(change)="onImageSelected($event)"
									multiple
								/>


































								<!-- Preview images -->
								<div class="mt-1 d-flex flex-wrap gap-1">
									<img
										*ngFor="let img of ImageUrls"
										[src]="img"
										width="60"
										height="60"
										class="rounded border"
									/>
								</div>
							</div>
						</div>


















					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- Fixed Action Buttons -->
	<div class="fixed-action-buttons">
		<button
			type="button"
			class="btn btn-secondary"
			(click)="goBack()"
		>
			‚Ü© Quay l·∫°i
		</button>
		<button
			type="submit"
			class="btn btn-success"
			[disabled]="productForm.invalid"
			(click)="onSubmit()"
		>
			üíæ L∆∞u l·∫°i
		</button>
	</div>
</div>
