<div class="container mt-3">
	<div class="card">
		<div class="card-header bg-light">
			<h5><i class="bi bi-plus-circle me-2"></i> Th√™m m·ªõi s·∫£n ph·∫©m</h5>
		</div>
		<div class="card-body">
			<form [formGroup]="productForm" (ngSubmit)="onSubmit()">
				<div class="row g-3">
					<!-- T√™n s·∫£n ph·∫©m -->
					<div class="col-md-6">
						<label class="form-label">T√™n s·∫£n ph·∫©m *</label>
						<input
							type="text"
							class="form-control"
							formControlName="name"
							placeholder="T√™n s·∫£n ph·∫©m"
						/>
						<div *ngIf="productForm.get('name')?.hasError('nameTaken')">
							T√™n ƒë√£ t·ªìn t·∫°i, vui l√≤ng ch·ªçn t√™n kh√°c.
						</div>
					</div>

					<!-- Gi√° -->
					<div class="col-md-6">
						<label class="form-label">Gi√° s·∫£n ph·∫©m</label>
						<input type="number" class="form-control" formControlName="price" />
					</div>

					<!-- Tr·∫°ng th√°i -->
					<div class="col-md-6">
						<label class="form-label">Tr·∫°ng th√°i</label>
						<select class="form-select" formControlName="status">
							<option value="m·ªü b√°n">m·ªü b√°n</option>
							<option value="ng∆∞ng b√°n">Ng∆∞ng b√°n</option>
						</select>
					</div>

					<!-- Danh m·ª•c -->
					<div class="col-md-6">
						<label class="form-label">Danh m·ª•c</label>
						<ng-select
							class="custom-ng-select"
							[items]="categoryList"
							bindLabel="name"
							bindValue="id"
							[multiple]="true"
							placeholder="Ch·ªçn danh m·ª•c..."
							formControlName="categories"
							[searchable]="true"
							[dropdownPosition]="'auto'"
						>
						</ng-select>
					</div>

					<!-- M√¥ t·∫£ -->
					<div class="col-12">
						<label class="form-label">M√¥ t·∫£ chi ti·∫øt</label>
						<textarea
							class="form-control"
							rows="4"
							formControlName="description"
						></textarea>
					</div>

					<!-- ·∫¢nh -->
					<div class="col-12">
						<label class="form-label">·∫¢nh s·∫£n ph·∫©m</label>
						<!-- Input group: URL + Add URL + Open File -->
						<div class="input-group mb-2">
							<input
								#imageUrl
								type="text"
								class="form-control"
								placeholder="Enter image URL"
								(keyup.enter)="addImageUrl(imageUrl)"
							/>
							<button
								class="btn btn-outline-secondary"
								type="button"
								(click)="addImageUrl(imageUrl)"
							>
								th√™m ·∫£nh
							</button>
							<button
								class="btn btn-outline-primary"
								type="button"
								(click)="fileInput.click()"
							>
								ch·ªçn ·∫£nh
							</button>
						</div>

						<!-- Hidden file input -->
						<input
							#fileInput
							type="file"
							class="d-none"
							(change)="onImageSelected($event)"
							multiple
						/>

						<!-- Preview images -->
						<div class="mt-2 d-flex flex-wrap gap-2">
							<img
								*ngFor="let img of ImageUrls"
								[src]="img"
								width="80"
								height="80"
								class="rounded border"
							/>
						</div>
					</div>

					<!-- N√∫t -->
					<div class="col-12 text-end mt-3">
						<button
							type="submit"
							class="btn btn-success"
							[disabled]="productForm.invalid"
						>
							üíæ L∆∞u l·∫°i
						</button>
						<button
							type="button"
							class="btn btn-secondary ms-2"
							(click)="goBack()"
						>
							‚Ü© Quay l·∫°i
						</button>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
