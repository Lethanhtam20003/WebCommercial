<div class="container py-4">
  <div class="card p-3 mb-3">
    <div class="d-flex justify-content-between align-items-center">
      <h5>Đơn hàng #{{ orderDetail.id }}</h5>
      <span class="badge bg-info text-dark text-uppercase">{{ orderDetail.status }}</span>
    </div>
    <div class="text-muted">Ngày tạo: {{ orderDetail.createdDate | date: 'dd/MM/yyyy HH:mm:ss' }}</div>
  </div>

  <div class="card mb-3">
    <div class="card-header bg-light">Thông tin người đặt</div>
    <div class="card-body">
      <p><strong>Họ tên:</strong> {{ orderDetail.userName }}</p>
    </div>
  </div>

  <div class="card mb-3">
    <div class="card-header bg-light">Danh sách sản phẩm</div>
    <div class="card-body p-0">
      <div *ngFor="let item of orderDetail.orderItems" class="d-flex align-items-center border-bottom p-3">
        <img [src]="item.productImage" class="img-thumbnail me-3" width="80" />
        <div class="flex-grow-1">
          <div>{{ item.productName }}</div>
          <div class="text-muted">Số lượng: {{ item.quantity }}</div>
        </div>
        <div class="text-end fw-bold">
          {{ item.price | currency:'VND':'symbol':'1.0-0':'vi' }}
        </div>
      </div>
    </div>
  </div>

  <div class="card mb-3" *ngIf="orderDetail.coupon">
    <div class="card-header bg-light">Mã giảm giá</div>
    <div class="card-body">
      <p>
        <strong>Mã:</strong> {{ orderDetail.coupon.code }}<br />
        <strong>Giảm:</strong> {{ orderDetail.coupon.discountPercentage }}%<br />
        <strong>Mô tả:</strong> {{ orderDetail.coupon.description }}<br />
        <strong>Hạn:</strong> {{ orderDetail.coupon.expirationDate | date:'dd/MM/yyyy' }}
      </p>
    </div>
  </div>

  <div class="card mb-3">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <p><strong>Tạm tính:</strong> {{ orderDetail.totalPrice | currency:'VND':'symbol':'1.0-0':'vi' }}</p>
        <p><strong>Giảm giá:</strong> 
          {{ (orderDetail.totalPrice - orderDetail.discountedPrice) || 0 | currency:'VND':'symbol':'1.0-0':'vi' }}
        </p>
      </div>
      <div>
        <strong class="fs-5">Tổng thanh toán:</strong>
        <div class="text-danger fs-4">{{ orderDetail.discountedPrice | currency:'VND':'symbol':'1.0-0':'vi' }}</div>
      </div>
    </div>
  </div>

  <div class="text-end" *ngIf="orderDetail.status === 'PENDING'">
    <button class="btn btn-success" [routerLink]="['/payment/' + orderDetail.id ]">Thanh toán</button>
  </div>
</div>
